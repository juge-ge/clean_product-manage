# 钢铁行业清洁生产云审核模块技术方案

## 目录

- [1. 模块概述](#1-模块概述)
- [2. 技术架构](#2-技术架构)
- [3. 功能模块设计](#3-功能模块设计)
- [4. 路由配置](#4-路由配置)
- [5. API接口设计](#5-api接口设计)
- [6. 数据模型设计](#6-数据模型设计)
- [7. 组件设计](#7-组件设计)
- [8. Mock数据设计](#8-mock数据设计)
- [9. 开发规范](#9-开发规范)
- [10. 实施计划](#10-实施计划)

## 1. 模块概述

### 1.1 模块定位

钢铁行业清洁生产云审核模块是清洁生产云审核系统的行业模块之一，专门针对钢铁制造企业的清洁生产审核需求设计，提供标准化的在线审核流程管理。**本模块的设计严格参照PCB模块的成熟技术方案和代码实现**，确保技术一致性和开发效率。

### 1.2 核心功能

与PCB模块保持完全一致的功能模块：

- **企业信息管理**：钢铁企业基本信息的录入、编辑、查看和删除
- **筹划与组织**：完整的审核团队组建、工作计划制定、培训记录管理
- **预审核**：基于《钢铁企业清洁生产评价指标》的数据填报
- **审核**：钢铁行业专用指标的在线审核和评估
- **方案库管理**：钢铁行业清洁生产整改方案的增删改查
- **审核报告**：自动生成可编辑的审核评估报告

### 1.3 技术特点

- 基于Vue 3 + Composition API开发
- 采用前后端分离架构
- 复用PCB模块的组件和布局设计
- 支持实时数据验证和等级评估
- 响应式设计，支持多端访问
- 模块化组件设计，便于维护和扩展

### 1.4 与PCB模块的关系

- **代码结构**：完全复用PCB模块的目录结构和文件组织方式
- **组件设计**：复用所有通用组件，仅替换行业相关数据
- **交互逻辑**：保持与PCB模块一致的用户交互流程
- **数据差异**：主要差异在于指标体系和方案库内容

## 2. 技术架构

### 2.1 前端技术栈

```javascript
{
  "框架": "Vue 3.x + Composition API",
  "UI组件库": "Naive UI",
  "状态管理": "Pinia",
  "路由管理": "Vue Router 4.x",
  "HTTP客户端": "Axios",
  "图标库": "Carbon Icons / Material Design Icons",
  "图表库": "ECharts",
  "构建工具": "Vite",
  "CSS框架": "UnoCSS"
}
```

### 2.2 后端技术栈（为后端预留接口）

```python
{
  "Web框架": "FastAPI",
  "数据库": "SQLite / PostgreSQL",
  "ORM": "SQLAlchemy",
  "数据验证": "Pydantic",
  "认证": "JWT"
}
```

### 2.3 项目结构

```
web/src/views/cloud-audit/steel/
├── index.vue                    # 钢铁模块首页（企业列表）
├── enterprise-detail/           # 企业详情页面
│   ├── index.vue               # 企业详情布局
│   ├── basic-info.vue          # 企业基本信息
│   ├── planning.vue            # 筹划与组织
│   ├── pre-audit.vue           # 预审核
│   ├── audit.vue               # 审核
│   ├── scheme-library.vue      # 方案库
│   ├── report.vue              # 审核报告
│   └── components/             # 钢铁模块专用组件
│       ├── ProductionInfoForm.vue      # 生产情况表单
│       ├── RawMaterialForm.vue         # 原材料表单
│       ├── ProcessEquipmentForm.vue    # 工艺装备表单
│       ├── ResourceConsumptionForm.vue # 资源消耗表单
│       ├── PollutionControlForm.vue    # 污染防治表单
│       ├── SolidWasteForm.vue          # 固废管理表单
│       └── SelfMonitoringForm.vue      # 自行监测表单
└── components/                  # 通用组件
    ├── EnterpriseCard.vue      # 企业卡片组件
    ├── EnterpriseForm.vue      # 企业表单组件
    ├── AuditProgress.vue       # 审核进度组件
    └── SchemeForm.vue          # 方案表单组件

web/src/mock/
├── steel.js                     # 钢铁企业列表Mock数据
└── steel-detail.js              # 钢铁企业详情Mock数据
```

## 3. 功能模块设计

### 3.1 钢铁首页（企业列表管理）

#### 3.1.1 功能描述

**完全复用PCB模块的设计**：

- 以卡片网格形式展示所有钢铁企业
- 提供企业搜索和筛选功能
- 支持企业的增删改查操作
- 显示企业审核状态和进度

#### 3.1.2 页面布局

```vue
<!-- web/src/views/cloud-audit/steel/index.vue -->
<template>
  <CommonPage title="钢铁行业清洁生产审核">
    <!-- 搜索和操作栏 -->
    <div class="search-bar mb-4">
      <n-space>
        <n-input 
          v-model:value="searchKeyword" 
          placeholder="请输入企业名称/地市/区县"
          clearable
          style="width: 300px"
        />
        <n-button type="primary" @click="showCreateModal = true">
          <template #icon>
            <TheIcon icon="carbon:add" />
          </template>
          创建企业
        </n-button>
      </n-space>
    </div>
    
    <!-- 企业卡片网格 -->
    <div class="enterprise-grid">
      <EnterpriseCard 
        v-for="enterprise in enterprises"
        :key="enterprise.id"
        :enterprise="enterprise"
        @view="handleView"
        @edit="handleEdit"
        @delete="handleDelete"
      />
    </div>
    
    <!-- 创建/编辑企业弹窗 -->
    <CrudModal
      v-model:visible="showCreateModal"
      :title="isEdit ? '编辑企业' : '创建企业'"
      @save="handleSave"
    >
      <EnterpriseForm ref="formRef" :data="currentEnterprise" />
    </CrudModal>
  </CommonPage>
</template>

<script setup>
import { ref, onMounted, watch, nextTick } from 'vue'
import { useRouter } from 'vue-router'
import { NButton, NInput, NSpace, NSpin } from 'naive-ui'
import CommonPage from '@/components/page/CommonPage.vue'
import CrudModal from '@/components/table/CrudModal.vue'
import TheIcon from '@/components/icon/TheIcon.vue'
import EnterpriseCard from './components/EnterpriseCard.vue'
import EnterpriseForm from './components/EnterpriseForm.vue'
import { mockApi } from '@/mock/steel'

defineOptions({ name: '钢铁行业审核' })

// ... 实现逻辑与PCB模块完全一致
</script>
```

### 3.2 企业详情页面

#### 3.2.1 整体布局设计

**完全复用PCB模块的六步骤流程**：

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/index.vue -->
<template>
  <div class="enterprise-detail">
    <!-- 顶部导航栏 -->
    <div class="detail-header mb-4">
      <div class="header-left">
        <n-space>
          <n-button 
            v-for="(step, index) in auditSteps"
            :key="step.key"
            :type="activeTab === step.key ? 'primary' : 'default'"
            @click="handleStepClick(step)"
          >
            <template #icon>
              <TheIcon :icon="getStepIcon(index)" />
            </template>
            {{ step.title }}
          </n-button>
        </n-space>
      </div>
      <div class="header-right">
        <n-button @click="handleBack" size="small">
          <template #icon>
            <TheIcon icon="carbon:arrow-left" />
          </template>
          返回列表
        </n-button>
      </div>
    </div>
    
    <!-- 模块内容区域 -->
    <div class="content-area">
      <n-spin :show="loading">
        <keep-alive>
          <component 
            v-if="currentEnterprise && getCurrentComponent()"
            :is="getCurrentComponent()"
            :enterprise-id="currentEnterprise.id"
            @update="handleModuleUpdate"
            @navigate="handleModuleNavigate"
          />
        </keep-alive>
      </n-spin>
    </div>
  </div>
</template>

<script setup>
// 审核步骤定义
const auditSteps = [
  { title: '企业信息', description: '基本信息录入', key: 'basic-info' },
  { title: '筹划与组织', description: '审核团队组建', key: 'planning' },
  { title: '预审核', description: '数据填报评估', key: 'pre-audit' },
  { title: '审核', description: '指标审核', key: 'audit' },
  { title: '方案库', description: '整改方案', key: 'scheme-library' },
  { title: '审核报告', description: '报告生成', key: 'report' }
]

// ... 其余逻辑与PCB模块完全一致
</script>
```

### 3.3 企业基本信息模块

#### 3.3.1 数据字段设计

**钢铁行业特定字段**：

```javascript
const enterpriseFields = {
  // 基本信息
  name: { label: '企业名称', type: 'input', required: true },
  city: { label: '所属地市', type: 'select', required: true },
  county: { label: '所属县', type: 'select', required: true },
  scale: { label: '规模', type: 'select', options: ['大型', '中型', '小型'] },
  
  // 财务信息
  capital: { label: '注册资本（万元）', type: 'number', required: true },
  annualOutput: { label: '年产钢量（万吨）', type: 'number', required: true },
  annualSales: { label: '年销售额（万元）', type: 'number', required: true },
  
  // 联系信息
  legalRepresentative: { label: '法人代表', type: 'input', required: true },
  address: { label: '注册地址', type: 'textarea', required: true },
  productionAddress: { label: '生产地址', type: 'textarea', required: true },
  postalCode: { label: '邮编', type: 'input' },
  contact: { label: '联系人', type: 'input', required: true },
  phone: { label: '联系电话', type: 'input', required: true },
  
  // 钢铁行业特定信息
  establishmentDate: { label: '建厂时间', type: 'date', required: true },
  industry: { label: '所属行业', type: 'input', default: '钢铁制造' },
  productionCapacity: { label: '生产能力（万吨/年）', type: 'number', required: true },
  mainProducts: { label: '主要产品', type: 'textarea', placeholder: '如：螺纹钢、线材、中厚板等' }
}
```

### 3.4 筹划与组织模块

**完全复用PCB模块的设计和实现**，包括：

- 审核工作组管理
- 工作计划制定
- 宣传与培训记录

### 3.5 预审核模块

#### 3.5.1 数据填报界面设计

**采用折叠面板布局，包含钢铁行业特定内容**：

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/pre-audit.vue -->
<template>
  <div class="pre-audit-page p-4">
    <n-spin :show="loading">
      <n-form ref="formRef" :model="formData">
        <n-collapse default-expanded-names="1" accordion>
          <n-collapse-item title="1. 企业总体生产情况" name="1">
            <ProductionInfoForm v-model="formData.productionInfo" />
          </n-collapse-item>
          
          <n-collapse-item title="2. 原辅材料使用情况" name="2">
            <RawMaterialForm v-model="formData.rawMaterials" />
          </n-collapse-item>
          
          <n-collapse-item title="3. 主要工艺及装备" name="3">
            <ProcessEquipmentForm v-model="formData.processEquipment" />
          </n-collapse-item>
          
          <n-collapse-item title="4. 资源能源消耗" name="4">
            <ResourceConsumptionForm v-model="formData.resourceConsumption" />
          </n-collapse-item>
          
          <n-collapse-item title="5. 污染防治" name="5">
            <PollutionControlForm v-model="formData.pollutionControl" />
          </n-collapse-item>
          
          <n-collapse-item title="6. 工业固体废物管理" name="6">
            <SolidWasteForm v-model="formData.solidWaste" />
          </n-collapse-item>
          
          <n-collapse-item title="7. 自行监测情况" name="7">
            <SelfMonitoringForm v-model="formData.selfMonitoring" />
          </n-collapse-item>
        </n-collapse>
      </n-form>
      
      <n-space justify="center" class="mt-6">
        <n-button @click="handleSaveDraft">保存草稿</n-button>
        <n-button type="primary" @click="handleSubmit">提交审核</n-button>
      </n-space>
    </n-spin>

    <!-- 模块导航按钮 -->
    <div class="module-navigation mt-4">
      <n-space justify="space-between">
        <n-button @click="goToPrevious">
          <template #icon>
            <TheIcon icon="carbon:arrow-left" />
          </template>
          筹划与组织
        </n-button>
        <n-button type="primary" @click="goToNext">
          审核
          <template #icon>
            <TheIcon icon="carbon:arrow-right" />
          </template>
        </n-button>
      </n-space>
    </div>
  </div>
</template>
```

#### 3.5.2 钢铁行业生产情况组件

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/components/ProductionInfoForm.vue -->
<template>
  <div class="production-info-form">
    <n-form-item label="年产钢量（万吨）">
      <n-input-number 
        v-model:value="formData.capacity"
        placeholder="请输入年产钢量"
        :min="0"
        :precision="2"
      />
    </n-form-item>
    
    <n-tabs type="line" class="mt-4">
      <n-tab-pane 
        v-for="year in years" 
        :key="year" 
        :name="year" 
        :tab="`${year}年产量`"
      >
        <n-grid :cols="2" :x-gap="24">
          <n-form-item-gi label="粗钢产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].crudeSteel"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
          
          <n-form-item-gi label="钢材产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].steelProducts"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
          
          <n-form-item-gi label="生铁产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].pigIron"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
          
          <n-form-item-gi label="焦炭产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].coke"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
          
          <n-form-item-gi label="烧结矿产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].sinterOre"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
          
          <n-form-item-gi label="球团矿产量（万吨）">
            <n-input-number 
              v-model:value="formData.output[year].pellet"
              placeholder="请输入产量"
              :min="0"
              :precision="2"
            />
          </n-form-item-gi>
        </n-grid>
      </n-tab-pane>
    </n-tabs>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { NFormItem, NInputNumber, NTabs, NTabPane, NGrid, NFormItemGi } from 'naive-ui'

const props = defineProps({
  modelValue: {
    type: Object,
    default: () => ({
      capacity: null,
      output: {
        '2022': {},
        '2023': {},
        '2024': {}
      }
    })
  }
})

const emit = defineEmits(['update:modelValue'])

const formData = computed({
  get: () => props.modelValue,
  set: (value) => emit('update:modelValue', value)
})

const years = ['2022', '2023', '2024']
</script>
```

### 3.6 审核模块

#### 3.6.1 钢铁行业指标体系

**基于《钢铁企业清洁生产评价指标体系》，定义约50-60项指标**：

```javascript
// 钢铁行业指标分类
const indicators = [
  // 一级指标：生产工艺与装备（约8-10项）
  // - 烧结工艺
  // - 球团工艺
  // - 炼铁工艺
  // - 炼钢工艺
  // - 轧钢工艺
  // - 能源回收利用装置
  
  // 一级指标：资源能源消耗（约12-15项）
  // - 吨钢综合能耗
  // - 吨钢电耗
  // - 吨钢新水消耗
  // - 焦化工序能耗
  // - 烧结工序能耗
  // - 球团工序能耗
  // - 炼铁工序能耗
  // - 炼钢工序能耗
  // - 轧钢工序能耗
  // - 水循环利用率
  // - 固体废弃物资源综合利用率
  
  // 一级指标：污染物产生（约15-18项）
  // - 吨钢COD产生量
  // - 吨钢氨氮产生量
  // - 吨钢SO₂产生量
  // - 吨钢NOx产生量
  // - 吨钢烟粉尘产生量
  // - 吨钢废水产生量
  // - 各工序污染物产生指标
  
  // 一级指标：废物回收利用（约5-7项）
  // - 废钢利用率
  // - 高炉煤气回收利用率
  // - 转炉煤气回收利用率
  // - 焦炉煤气回收利用率
  // - 余热余压利用率
  
  // 一级指标：环境管理（约10-12项）
  // - 环保法律法规执行情况（限定性）
  // - 产业政策符合性（限定性）
  // - 清洁生产管理
  // - 环境管理体系认证
  // - 能源管理体系认证
  // - 污染物排放监测
  // - 危险废物处置（限定性）
  // - 节能管理
  // - 碳排放管理
]
```

#### 3.6.2 审核界面设计

**完全复用PCB模块的审核表格设计**：

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/audit.vue -->
<template>
  <div class="audit-page p-4">
    <n-card title="审核结果总览" class="mb-4">
      <!-- 汇总统计 -->
      <n-grid :cols="4" :x-gap="16" class="mb-4">
        <n-gi><n-statistic label="最终得分" :value="summary.totalScore.toFixed(2)" /></n-gi>
        <n-gi><n-statistic label="综合等级">
          <n-tag :type="getLevelTagType(summary.overallLevel)">{{ summary.overallLevel }}</n-tag>
        </n-statistic></n-gi>
        <n-gi><n-statistic label="待改进项数" :value="summary.improvementItems" /></n-gi>
        <n-gi><n-statistic label="限定性指标" :value="summary.limitingIndicators" /></n-gi>
      </n-grid>
      
      <!-- 审核进度图表 -->
      <div class="audit-chart">
        <div class="score-circle">
          <n-progress 
            type="circle" 
            :percentage="summary.totalScore" 
            :color="getProgressColor(summary.totalScore)"
            :size="140"
            :stroke-width="10"
          >
            <div class="score-content">
              <div class="score-number">{{ summary.totalScore.toFixed(1) }}分</div>
            </div>
          </n-progress>
        </div>
        <div class="chart-legend mt-4">
          <n-space>
            <n-tag type="success">I级 (≥90分)</n-tag>
            <n-tag type="info">II级 (80-89分)</n-tag>
            <n-tag type="warning">III级 (60-79分)</n-tag>
            <n-tag type="error">不达标 (<60分)</n-tag>
          </n-space>
        </div>
      </div>
    </n-card>

    <!-- 审核操作栏 -->
    <n-card class="mb-4">
      <n-space>
        <n-button type="primary" @click="handleAutoCalculate">
          <template #icon>
            <TheIcon icon="carbon:calculator" />
          </template>
          自动计算评估
        </n-button>
        <n-button @click="handleResetAudit">
          <template #icon>
            <TheIcon icon="carbon:reset" />
          </template>
          重置审核
        </n-button>
        <n-button type="success" @click="handleSubmitAudit" :disabled="!canSubmit">
          <template #icon>
            <TheIcon icon="carbon:checkmark" />
          </template>
          提交审核结果
        </n-button>
      </n-space>
    </n-card>

    <!-- 详细审核表 -->
    <n-card>
      <n-data-table
        :columns="columns"
        :data="auditTreeData"
        :row-key="row => row.key"
        :default-expand-all="true"
        :pagination="false"
        :loading="tableLoading"
        :cascade="false"
      >
        <!-- 表格列定义与PCB模块一致 -->
      </n-data-table>
    </n-card>
    
    <!-- 模块导航按钮 -->
    <div class="module-navigation mt-4">
      <n-space justify="space-between">
        <n-button @click="goToPrevious">
          <template #icon>
            <TheIcon icon="carbon:arrow-left" />
          </template>
          预审核
        </n-button>
        <n-button type="primary" @click="goToNext">
          方案库
          <template #icon>
            <TheIcon icon="carbon:arrow-right" />
          </template>
        </n-button>
      </n-space>
    </div>
  </div>
</template>
```

### 3.7 清洁生产方案库

#### 3.7.1 方案管理界面

**完全复用PCB模块的方案库设计**，采用表格内滚动和可搜索多选下拉框：

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/scheme-library.vue -->
<template>
  <div class="scheme-library">
    <n-card title="清洁生产方案库">
      <template #header-extra>
        <n-button type="primary" @click="handleAddClick">
          <template #icon>
            <TheIcon icon="carbon:add" />
          </template>
          添加方案
        </n-button>
      </template>
      
      <!-- 方案表格（带内置滚动） -->
      <div class="scheme-table-container">
        <n-data-table
          ref="schemeTableRef"
          :columns="schemeColumns"
          :data="schemeList"
          :loading="loading"
          :scroll-x="1400"
          :bordered="true"
          :single-line="false"
          size="small"
          :pagination="false"
        />
      </div>
      
      <!-- 查询栏 -->
      <div class="query-bar">
        <n-space>
          <n-input 
            v-model:value="queryItems.name" 
            placeholder="请输入方案名称"
            clearable
            style="width: 200px"
            @input="handleSearch"
          />
          <n-select
            v-model:value="queryItems.indicatorIds"
            :options="indicatorOptions"
            multiple
            filterable
            clearable
            :placeholder="selectedIndicatorCount > 0 ? `已选择${selectedIndicatorCount}个指标` : '请选择关联指标（支持搜索）'"
            :max-tag-count="2"
            style="width: 350px"
            @update:value="handleSearch"
          />
          <n-button @click="handleReset">重置</n-button>
        </n-space>
      </div>
    </n-card>
    
    <!-- 添加/编辑方案弹窗 -->
    <CrudModal
      v-model:visible="showAddModal"
      :title="isEdit ? '编辑方案' : '添加方案'"
      @save="handleSaveScheme"
    >
      <SchemeForm ref="schemeFormRef" :data="currentScheme" />
    </CrudModal>
  </div>
</template>

<script setup>
// 扁平化的指标选项列表（用于可搜索下拉框）
const indicatorOptions = ref([
  // 根据钢铁行业的50-60项指标定义
  { label: '烧结工艺装备', value: 1 },
  { label: '球团工艺装备', value: 2 },
  { label: '炼铁工艺装备', value: 3 },
  { label: '炼钢工艺装备', value: 4 },
  { label: '轧钢工艺装备', value: 5 },
  // ... 其他指标
])

// 其余逻辑与PCB模块完全一致
</script>

<style scoped>
.scheme-table-container {
  margin-bottom: 16px;
  max-height: 600px;
  overflow-y: auto;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

.query-bar {
  padding: 16px;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 16px;
}

/* 优化滚动条样式 */
:deep(.n-data-table .n-data-table-base-table-body) {
  scrollbar-width: thin;
  scrollbar-color: #c1c1c1 #f1f1f1;
}
</style>
```

### 3.8 审核评估报告

**完全复用PCB模块的报告生成和编辑功能**。

## 4. 路由配置

### 4.1 钢铁模块路由结构

```javascript
// web/src/router/modules/cloudAudit.js (添加钢铁部分)
{
  path: 'steel',
  name: 'Steel',
  component: () => import('@/views/cloud-audit/steel/index.vue'),
  meta: { 
    title: '钢铁行业审核',
    icon: 'carbon:industry'
  },
  children: [
    {
      path: ':id',
      name: 'SteelEnterpriseDetail',
      component: () => import('@/views/cloud-audit/steel/enterprise-detail/index.vue'),
      meta: { 
        title: '企业详情',
        hideInMenu: true
      }
    }
  ]
}
```

## 5. API接口设计

### 5.1 钢铁企业管理API

**为后端预留标准化接口**：

```javascript
// web/src/api/modules/steel.js
import { request } from '@/utils'

export const steelApi = {
  // 企业列表管理
  getEnterpriseList: (params) => request.get('/api/v1/steel/enterprise', { params }),
  getEnterpriseDetail: (id) => request.get(`/api/v1/steel/enterprise/${id}`),
  createEnterprise: (data) => request.post('/api/v1/steel/enterprise', data),
  updateEnterprise: (id, data) => request.put(`/api/v1/steel/enterprise/${id}`, data),
  deleteEnterprise: (id) => request.delete(`/api/v1/steel/enterprise/${id}`),
  
  // 筹划与组织
  getAuditTeam: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/team`),
  addTeamMember: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/team`, data),
  updateTeamMember: (enterpriseId, memberId, data) => request.put(`/api/v1/steel/enterprise/${enterpriseId}/team/${memberId}`, data),
  deleteTeamMember: (enterpriseId, memberId) => request.delete(`/api/v1/steel/enterprise/${enterpriseId}/team/${memberId}`),
  
  getWorkPlans: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/plans`),
  createWorkPlan: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/plans`, data),
  
  getTrainingRecords: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/training`),
  createTrainingRecord: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/training`, data),
  
  // 预审核数据
  getPreAuditData: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/pre-audit`),
  submitPreAuditData: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/pre-audit`, data),
  getAuditStandards: () => request.get('/api/v1/steel/standards'),
  
  // 审核
  getAuditData: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/audit`),
  submitAuditResult: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/audit`, data),
  getAuditResults: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/audit/results`),
  
  // 方案库
  getSchemes: (enterpriseId, params) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/schemes`, { params }),
  getRecommendedSchemes: (enterpriseId, indicatorId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/schemes/recommended/${indicatorId}`),
  createScheme: (enterpriseId, data) => request.post(`/api/v1/steel/enterprise/${enterpriseId}/schemes`, data),
  updateScheme: (enterpriseId, schemeId, data) => request.put(`/api/v1/steel/enterprise/${enterpriseId}/schemes/${schemeId}`, data),
  deleteScheme: (enterpriseId, schemeId) => request.delete(`/api/v1/steel/enterprise/${enterpriseId}/schemes/${schemeId}`),
  
  // 报告生成
  generateReport: (enterpriseId) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/report`),
  updateReport: (enterpriseId, data) => request.put(`/api/v1/steel/enterprise/${enterpriseId}/report`, data),
  exportReport: (enterpriseId, format) => request.get(`/api/v1/steel/enterprise/${enterpriseId}/report/export`, { 
    params: { format },
    responseType: 'blob'
  })
}
```

### 5.2 后端API接口规范（为后端预留）

```python
# app/api/v1/steel/enterprise.py
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.orm import Session
from app.core.dependency import get_db
from app.schemas.steel import EnterpriseCreate, EnterpriseUpdate, EnterpriseResponse
from app.controllers.steel import EnterpriseController

router = APIRouter()

@router.get("/", response_model=List[EnterpriseResponse])
async def get_enterprise_list(
    skip: int = 0,
    limit: int = 100,
    search: Optional[str] = None,
    db: Session = Depends(get_db)
):
    """获取钢铁企业列表"""
    return EnterpriseController.get_list(db, skip=skip, limit=limit, search=search)

@router.get("/{enterprise_id}", response_model=EnterpriseResponse)
async def get_enterprise_detail(
    enterprise_id: int,
    db: Session = Depends(get_db)
):
    """获取钢铁企业详情"""
    enterprise = EnterpriseController.get_by_id(db, enterprise_id)
    if not enterprise:
        raise HTTPException(status_code=404, detail="企业不存在")
    return enterprise

@router.post("/", response_model=EnterpriseResponse)
async def create_enterprise(
    enterprise: EnterpriseCreate,
    db: Session = Depends(get_db)
):
    """创建钢铁企业"""
    return EnterpriseController.create(db, enterprise)

@router.put("/{enterprise_id}", response_model=EnterpriseResponse)
async def update_enterprise(
    enterprise_id: int,
    enterprise: EnterpriseUpdate,
    db: Session = Depends(get_db)
):
    """更新钢铁企业信息"""
    return EnterpriseController.update(db, enterprise_id, enterprise)

@router.delete("/{enterprise_id}")
async def delete_enterprise(
    enterprise_id: int,
    db: Session = Depends(get_db)
):
    """删除钢铁企业"""
    EnterpriseController.delete(db, enterprise_id)
    return {"message": "删除成功"}
```

## 6. 数据模型设计

### 6.1 前端数据模型

```javascript
// web/src/types/steel.js

// 企业模型
export const EnterpriseModel = {
  id: Number,
  name: String,
  city: String,
  county: String,
  scale: String,
  capital: Number,
  annualOutput: Number,  // 年产钢量
  annualSales: Number,
  legalRepresentative: String,
  address: String,
  productionAddress: String,
  postalCode: String,
  contact: String,
  phone: String,
  establishmentDate: String,
  industry: String,  // "钢铁制造"
  productionCapacity: Number,  // 生产能力
  mainProducts: String,  // 主要产品
  auditStatus: String,  // 'pending', 'in-progress', 'completed'
  createdAt: String,
  updatedAt: String
}

// 预审核数据模型
export const PreAuditDataModel = {
  // 企业总体生产情况
  productionInfo: {
    capacity: Number,  // 年产钢量
    output: {
      '2022': {
        crudeSteel: Number,     // 粗钢产量
        steelProducts: Number,  // 钢材产量
        pigIron: Number,        // 生铁产量
        coke: Number,           // 焦炭产量
        sinterOre: Number,      // 烧结矿产量
        pellet: Number          // 球团矿产量
      },
      '2023': { /* 同上 */ },
      '2024': { /* 同上 */ }
    }
  },
  
  // 原辅材料使用情况
  rawMaterials: [
    {
      id: Number,
      year: Number,
      name: String,        // 材料名称（铁矿石、焦炭、石灰石等）
      unit: String,        // 单位
      process: String,     // 工序（烧结、炼铁、炼钢等）
      amount: Number,      // 用量
      source: String,      // 来源
      quality: String      // 质量指标
    }
  ],
  
  // 主要工艺及装备使用
  processEquipment: {
    sintering: { capacity: String, equipment: String, year: String },  // 烧结
    pelletizing: { capacity: String, equipment: String, year: String }, // 球团
    coking: { capacity: String, equipment: String, year: String },      // 焦化
    ironMaking: { capacity: String, equipment: String, year: String },  // 炼铁
    steelMaking: { capacity: String, equipment: String, year: String }, // 炼钢
    rolling: { capacity: String, equipment: String, year: String }      // 轧钢
  },
  
  // 资源能源消耗
  resourceConsumption: {
    energy: [
      { year: Number, type: String, amount: Number, unit: String }
    ],
    water: [
      { year: Number, type: String, amount: Number, source: String }
    ],
    electricity: [
      { year: Number, amount: Number, unit: String }
    ]
  },
  
  // 污染防治
  pollutionControl: {
    wastewater: {
      treatment: String,
      capacity: Number,
      process: String
    },
    wasteGas: {
      treatment: String,
      facilities: String,
      efficiency: Number
    },
    solidWaste: {
      treatment: String,
      utilization: Number
    }
  },
  
  // 工业固体废物管理
  solidWaste: {
    general: [
      { year: Number, name: String, type: String, amount: Number, disposal: String }
    ],
    hazardous: [
      { year: Number, name: String, type: String, code: String, amount: Number, disposal: String }
    ]
  },
  
  // 自行监测情况
  selfMonitoring: {
    wastewater: {
      pollutants: String,
      frequency: String,
      compliance: String
    },
    wasteGas: {
      pollutants: String,
      frequency: String,
      compliance: String
    },
    noise: {
      points: Number,
      frequency: String,
      compliance: String
    }
  }
}

// 审核指标模型
export const AuditIndicatorModel = {
  id: Number,
  name: String,
  category: String,  // 一级指标分类
  type: String,      // 'qualitative', 'quantitative', 'limiting'
  level: String,     // 'I', 'II', 'III', '不达标'
  score: Number,
  isLimiting: Boolean,
  weight: Number,
  unit: String,
  currentValue: Number,
  standardValues: {
    level1: Number,
    level2: Number,
    level3: Number
  },
  recommendedSchemes: Array,
  selectedSchemes: Array
}

// 方案模型
export const SchemeModel = {
  id: Number,
  name: String,
  type: String,  // '工艺改进', '设备更新', '管理优化'等
  description: String,
  problemSolved: String,
  implementation: String,
  expectedEffect: String,
  economicBenefit: String,
  environmentalBenefit: String,
  investment: Number,
  paybackPeriod: Number,
  indicatorIds: Array,
  indicatorNames: String,
  applicableConditions: String,
  riskAnalysis: String,
  referenceCase: String
}
```

### 6.2 后端数据模型（为后端预留）

```python
# app/models/steel.py
from sqlalchemy import Column, Integer, String, Float, DateTime, Text, ForeignKey
from sqlalchemy.orm import relationship
from app.models.base import Base

class SteelEnterprise(Base):
    __tablename__ = "steel_enterprises"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String(200), nullable=False, comment="企业名称")
    city = Column(String(100), nullable=False, comment="所属地市")
    county = Column(String(100), nullable=False, comment="所属县")
    scale = Column(String(50), comment="规模")
    capital = Column(Float, comment="注册资本（万元）")
    annual_output = Column(Float, comment="年产钢量（万吨）")
    annual_sales = Column(Float, comment="年销售额（万元）")
    legal_representative = Column(String(100), comment="法人代表")
    address = Column(Text, comment="注册地址")
    production_address = Column(Text, comment="生产地址")
    postal_code = Column(String(10), comment="邮编")
    contact = Column(String(100), comment="联系人")
    phone = Column(String(20), comment="联系电话")
    establishment_date = Column(DateTime, comment="建厂时间")
    industry = Column(String(100), default="钢铁制造", comment="所属行业")
    production_capacity = Column(Float, comment="生产能力（万吨/年）")
    main_products = Column(Text, comment="主要产品")
    audit_status = Column(String(50), default="pending", comment="审核状态")
    
    # 关联关系
    audit_team = relationship("SteelAuditTeam", back_populates="enterprise")
    work_plans = relationship("SteelWorkPlan", back_populates="enterprise")
    pre_audit_data = relationship("SteelPreAuditData", back_populates="enterprise")
    audit_results = relationship("SteelAuditResult", back_populates="enterprise")
    schemes = relationship("SteelScheme", back_populates="enterprise")

class SteelPreAuditData(Base):
    __tablename__ = "steel_pre_audit_data"
    
    id = Column(Integer, primary_key=True, index=True)
    enterprise_id = Column(Integer, ForeignKey("steel_enterprises.id"))
    
    # 生产情况
    capacity = Column(Float, comment="年产钢量（万吨）")
    crude_steel_output = Column(Float, comment="粗钢产量")
    steel_products_output = Column(Float, comment="钢材产量")
    pig_iron_output = Column(Float, comment="生铁产量")
    coke_output = Column(Float, comment="焦炭产量")
    
    # 能源消耗
    comprehensive_energy_consumption = Column(Float, comment="吨钢综合能耗（kgce/t）")
    electricity_consumption = Column(Float, comment="吨钢电耗（kWh/t）")
    water_consumption = Column(Float, comment="吨钢新水消耗（m³/t）")
    
    # 污染物产生
    cod_generation = Column(Float, comment="吨钢COD产生量（kg/t）")
    nh3_n_generation = Column(Float, comment="吨钢氨氮产生量（kg/t）")
    so2_generation = Column(Float, comment="吨钢SO₂产生量（kg/t）")
    nox_generation = Column(Float, comment="吨钢NOx产生量（kg/t）")
    dust_generation = Column(Float, comment="吨钢烟粉尘产生量（kg/t）")
    
    # 资源综合利用
    waste_steel_utilization = Column(Float, comment="废钢利用率（%）")
    water_reuse_rate = Column(Float, comment="水循环利用率（%）")
    solid_waste_utilization = Column(Float, comment="固废综合利用率（%）")
    
    enterprise = relationship("SteelEnterprise", back_populates="pre_audit_data")

class SteelScheme(Base):
    __tablename__ = "steel_schemes"
    
    id = Column(Integer, primary_key=True, index=True)
    enterprise_id = Column(Integer, ForeignKey("steel_enterprises.id"))
    name = Column(String(200), nullable=False, comment="方案名称")
    type = Column(String(100), comment="方案类型")
    description = Column(Text, comment="方案描述")
    problem_solved = Column(Text, comment="解决问题")
    implementation = Column(Text, comment="实施方案")
    expected_effect = Column(Text, comment="预期效果")
    economic_benefit = Column(Text, comment="经济效益")
    environmental_benefit = Column(Text, comment="环境效益")
    investment = Column(Float, comment="投资估算（万元）")
    payback_period = Column(Float, comment="投资回收期（年）")
    indicator_ids = Column(Text, comment="关联指标ID（JSON数组）")
    indicator_names = Column(Text, comment="关联指标名称")
    
    enterprise = relationship("SteelEnterprise", back_populates="schemes")
```

## 7. 组件设计

### 7.1 通用组件复用

**完全复用以下PCB模块的通用组件**：

1. **EnterpriseCard.vue** - 企业卡片组件
2. **EnterpriseForm.vue** - 企业表单组件
3. **AuditProgress.vue** - 审核进度组件
4. **CrudTable.vue** - 通用表格组件
5. **CrudModal.vue** - 通用弹窗组件
6. **SchemeForm.vue** - 方案表单组件

### 7.2 钢铁行业专用组件

需要创建以下钢铁行业专用组件（基于PCB模块的组件模板）：

#### 7.2.1 生产情况表单组件

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/components/ProductionInfoForm.vue -->
<template>
  <div class="production-info-form">
    <!-- 钢铁行业特定的生产数据输入 -->
  </div>
</template>
```

#### 7.2.2 原材料使用表单组件

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/components/RawMaterialForm.vue -->
<template>
  <div class="raw-material-form">
    <!-- 钢铁行业特定的原材料数据表格 -->
  </div>
</template>
```

#### 7.2.3 工艺装备表单组件

```vue
<!-- web/src/views/cloud-audit/steel/enterprise-detail/components/ProcessEquipmentForm.vue -->
<template>
  <div class="process-equipment-form">
    <!-- 钢铁行业特定的工艺装备信息 -->
  </div>
</template>
```

#### 7.2.4 其他子组件

- **ResourceConsumptionForm.vue** - 资源能源消耗表单
- **PollutionControlForm.vue** - 污染防治表单
- **SolidWasteForm.vue** - 固废管理表单
- **SelfMonitoringForm.vue** - 自行监测表单

## 8. Mock数据设计

### 8.1 企业列表Mock数据

```javascript
// web/src/mock/steel.js

// 钢铁企业列表Mock数据
const mockEnterprises = [
  {
    id: 1,
    name: '某某钢铁有限公司',
    city: '石家庄市',
    county: '鹿泉区',
    scale: '大型',
    capital: 50000,
    annualOutput: 500,  // 万吨
    annualSales: 250000,
    legalRepresentative: '张三',
    address: '河北省石家庄市鹿泉区工业园区',
    productionAddress: '河北省石家庄市鹿泉区工业园区',
    postalCode: '050200',
    contact: '李四',
    phone: '13800138001',
    establishmentDate: '2010-01-01',
    industry: '钢铁制造',
    productionCapacity: 600,
    mainProducts: '螺纹钢、线材、中厚板',
    auditStatus: 'in-progress',
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-15T00:00:00Z'
  },
  {
    id: 2,
    name: 'XX钢铁集团股份有限公司',
    city: '唐山市',
    county: '迁安市',
    scale: '特大型',
    capital: 200000,
    annualOutput: 2000,
    annualSales: 1000000,
    legalRepresentative: '王五',
    address: '河北省唐山市迁安市钢城区',
    productionAddress: '河北省唐山市迁安市钢城区',
    postalCode: '064400',
    contact: '赵六',
    phone: '13800138002',
    establishmentDate: '2005-06-01',
    industry: '钢铁制造',
    productionCapacity: 2500,
    mainProducts: '热轧板卷、冷轧板卷、镀锌板',
    auditStatus: 'pending',
    createdAt: '2024-02-01T00:00:00Z',
    updatedAt: '2024-02-10T00:00:00Z'
  }
]

// Mock API
export const mockApi = {
  getEnterpriseList: (params = {}) => {
    const { search = '' } = params
    let filteredData = mockEnterprises
    
    if (search) {
      filteredData = mockEnterprises.filter(e => 
        e.name.includes(search) || 
        e.city.includes(search) || 
        e.county.includes(search)
      )
    }
    
    return Promise.resolve({
      data: filteredData
    })
  },
  
  getEnterpriseDetail: (id) => {
    const enterprise = mockEnterprises.find(e => e.id === parseInt(id))
    return Promise.resolve({
      data: enterprise || {}
    })
  },
  
  createEnterprise: (data) => {
    const newEnterprise = {
      ...data,
      id: mockEnterprises.length + 1,
      auditStatus: 'pending',
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    }
    mockEnterprises.push(newEnterprise)
    return Promise.resolve({
      data: newEnterprise
    })
  },
  
  updateEnterprise: (id, data) => {
    const index = mockEnterprises.findIndex(e => e.id === parseInt(id))
    if (index > -1) {
      mockEnterprises[index] = {
        ...mockEnterprises[index],
        ...data,
        updatedAt: new Date().toISOString()
      }
      return Promise.resolve({
        data: mockEnterprises[index]
      })
    }
    return Promise.reject(new Error('企业不存在'))
  },
  
  deleteEnterprise: (id) => {
    const index = mockEnterprises.findIndex(e => e.id === parseInt(id))
    if (index > -1) {
      mockEnterprises.splice(index, 1)
      return Promise.resolve({
        message: '删除成功'
      })
    }
    return Promise.reject(new Error('企业不存在'))
  }
}
```

### 8.2 企业详情Mock数据

```javascript
// web/src/mock/steel-detail.js

// 钢铁行业指标定义（50-60项）
const mockIndicators = [
  // 一级指标：生产工艺与装备（8-10项）
  { id: 1, name: '烧结工艺装备', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 2, name: '球团工艺装备', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 3, name: '炼铁工艺装备', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 4, name: '炼钢工艺装备', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 5, name: '轧钢工艺装备', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 6, name: '能源回收利用装置', category: '生产工艺与装备', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  
  // 一级指标：资源能源消耗（12-15项）
  { id: 7, name: '吨钢综合能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 2.0, currentValue: null },
  { id: 8, name: '吨钢电耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kWh/t', weight: 2.0, currentValue: null },
  { id: 9, name: '吨钢新水消耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'm³/t', weight: 2.0, currentValue: null },
  { id: 10, name: '焦化工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 11, name: '烧结工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 12, name: '球团工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 13, name: '炼铁工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 14, name: '炼钢工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 15, name: '轧钢工序能耗', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kgce/t', weight: 1.8, currentValue: null },
  { id: 16, name: '水循环利用率', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 2.0, currentValue: null },
  { id: 17, name: '固体废弃物资源综合利用率', category: '资源能源消耗', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 2.0, currentValue: null },
  
  // 一级指标：污染物产生（15-18项）
  { id: 18, name: '吨钢COD产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kg/t', weight: 2.5, currentValue: null },
  { id: 19, name: '吨钢氨氮产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kg/t', weight: 2.5, currentValue: null },
  { id: 20, name: '吨钢SO₂产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kg/t', weight: 2.5, currentValue: null },
  { id: 21, name: '吨钢NOx产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kg/t', weight: 2.5, currentValue: null },
  { id: 22, name: '吨钢烟粉尘产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'kg/t', weight: 2.5, currentValue: null },
  { id: 23, name: '吨钢废水产生量', category: '污染物产生', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: 'm³/t', weight: 2.0, currentValue: null },
  
  // 一级指标：废物回收利用（5-7项）
  { id: 24, name: '废钢利用率', category: '废物回收利用', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 2.0, currentValue: null },
  { id: 25, name: '高炉煤气回收利用率', category: '废物回收利用', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 1.8, currentValue: null },
  { id: 26, name: '转炉煤气回收利用率', category: '废物回收利用', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 1.8, currentValue: null },
  { id: 27, name: '焦炉煤气回收利用率', category: '废物回收利用', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 1.8, currentValue: null },
  { id: 28, name: '余热余压利用率', category: '废物回收利用', type: 'quantitative', level: null, score: 0, isLimiting: false, unit: '%', weight: 2.0, currentValue: null },
  
  // 一级指标：环境管理（10-12项）
  { id: 29, name: '*环保法律法规执行情况', category: '环境管理', type: 'limiting', level: null, score: 0, isLimiting: true, weight: 2.0, currentValue: null },
  { id: 30, name: '*产业政策符合性', category: '环境管理', type: 'limiting', level: null, score: 0, isLimiting: true, weight: 2.0, currentValue: null },
  { id: 31, name: '清洁生产管理', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 2.0, currentValue: null },
  { id: 32, name: '环境管理体系认证', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 33, name: '能源管理体系认证', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null },
  { id: 34, name: '污染物排放监测', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 2.0, currentValue: null },
  { id: 35, name: '*危险废物处置', category: '环境管理', type: 'limiting', level: null, score: 0, isLimiting: true, weight: 2.0, currentValue: null },
  { id: 36, name: '节能管理', category: '环境管理', type: 'quantitative', level: null, score: 0, isLimiting: false, weight: 2.0, currentValue: null },
  { id: 37, name: '碳排放管理', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 2.0, currentValue: null },
  { id: 38, name: '清洁生产审核', category: '环境管理', type: 'qualitative', level: null, score: 0, isLimiting: false, weight: 1.5, currentValue: null }
]

// 钢铁行业清洁生产方案库（100-120项方案）
const mockSchemeLibrary = [
  // 工艺优化类方案（30-35项）
  {
    id: 1,
    name: '烧结烟气循环技术',
    type: '工艺优化',
    description: '将烧结机头部烟气循环回用至烧结料中，减少新鲜空气用量',
    problemSolved: '降低烧结工序能耗，减少废气排放量',
    economicBenefit: '年节约标煤约5000吨，节约成本约300万元',
    environmentalBenefit: '减少SO₂排放约200吨/年，减少NOx排放约150吨/年',
    investment: 800,
    paybackPeriod: 2.7,
    indicatorIds: [1, 11, 20, 21],
    indicatorNames: '烧结工艺装备、烧结工序能耗、吨钢SO₂产生量、吨钢NOx产生量'
  },
  {
    id: 2,
    name: '高炉富氧喷煤技术',
    type: '工艺优化',
    description: '在高炉风口区域喷吹煤粉并富氧助燃，提高燃烧效率',
    problemSolved: '降低焦比，提高生铁产量，减少能源消耗',
    economicBenefit: '焦比降低20kg/t，年节约成本约2000万元',
    environmentalBenefit: '减少CO₂排放约10万吨/年',
    investment: 3000,
    paybackPeriod: 1.5,
    indicatorIds: [3, 7, 13],
    indicatorNames: '炼铁工艺装备、吨钢综合能耗、炼铁工序能耗'
  },
  
  // 设备改造类方案（25-30项）
  {
    id: 3,
    name: '转炉负能炼钢技术',
    type: '设备改造',
    description: '优化转炉炼钢工艺参数，实现不需外加能源的负能炼钢',
    problemSolved: '降低炼钢工序能耗，提高转炉煤气回收量',
    economicBenefit: '年回收转炉煤气约5000万m³，创效约1000万元',
    environmentalBenefit: '减少能源消耗，降低CO₂排放',
    investment: 2000,
    paybackPeriod: 2.0,
    indicatorIds: [4, 14, 26],
    indicatorNames: '炼钢工艺装备、炼钢工序能耗、转炉煤气回收利用率'
  },
  
  // 节能降耗类方案（20-25项）
  {
    id: 4,
    name: '余热余压发电技术',
    type: '节能降耗',
    description: '利用高炉、转炉、烧结等工序产生的余热余压进行发电',
    problemSolved: '回收利用余热余压，降低电力消耗',
    economicBenefit: '年发电量约2亿kWh，节约成本约1亿元',
    environmentalBenefit: '减少外购电力，降低间接碳排放',
    investment: 15000,
    paybackPeriod: 1.5,
    indicatorIds: [6, 8, 28],
    indicatorNames: '能源回收利用装置、吨钢电耗、余热余压利用率'
  },
  
  // 污染治理类方案（15-20项）
  {
    id: 5,
    name: '烧结烟气脱硫脱硝一体化技术',
    type: '污染治理',
    description: '采用活性焦干法烟气净化技术，同时脱除SO₂和NOx',
    problemSolved: '有效控制烧结烟气污染物排放',
    economicBenefit: '副产硫酸或硫磺，年创效约500万元',
    environmentalBenefit: 'SO₂去除率≥95%，NOx去除率≥60%',
    investment: 8000,
    paybackPeriod: 4.0,
    indicatorIds: [1, 20, 21],
    indicatorNames: '烧结工艺装备、吨钢SO₂产生量、吨钢NOx产生量'
  },
  
  // 水处理类方案（10-12项）
  {
    id: 6,
    name: '废水深度处理及回用技术',
    type: '水处理',
    description: '采用超滤+反渗透技术对工业废水进行深度处理',
    problemSolved: '提高水循环利用率，减少新鲜水消耗',
    economicBenefit: '年节约新鲜水约200万m³，节约成本约600万元',
    environmentalBenefit: '减少废水排放，提高水资源利用效率',
    investment: 3000,
    paybackPeriod: 5.0,
    indicatorIds: [9, 16, 18, 19],
    indicatorNames: '吨钢新水消耗、水循环利用率、吨钢COD产生量、吨钢氨氮产生量'
  },
  
  // 固废利用类方案（8-10项）
  {
    id: 7,
    name: '钢渣综合利用技术',
    type: '固废利用',
    description: '采用热闷法处理钢渣，用于水泥生产、道路建设等',
    problemSolved: '提高钢渣资源化利用率，减少固废堆存',
    economicBenefit: '年处理钢渣约50万吨，创效约1000万元',
    environmentalBenefit: '减少土地占用，提高资源利用率',
    investment: 2000,
    paybackPeriod: 2.0,
    indicatorIds: [17, 35],
    indicatorNames: '固体废弃物资源综合利用率、危险废物处置'
  },
  
  // 管理优化类方案（5-8项）
  {
    id: 8,
    name: '能源管理中心建设',
    type: '管理优化',
    description: '建立能源管理中心，实现能源的集中监控和优化调度',
    problemSolved: '提高能源利用效率，降低能源消耗',
    economicBenefit: '综合能耗降低3-5%，年节约成本约3000万元',
    environmentalBenefit: '减少能源消耗和碳排放',
    investment: 5000,
    paybackPeriod: 1.7,
    indicatorIds: [7, 8, 36],
    indicatorNames: '吨钢综合能耗、吨钢电耗、节能管理'
  }
  
  // ... 其余90-112项方案，覆盖钢铁行业的各个工序和指标
]

// 推荐方案获取函数
const getRecommendedSchemes = (indicatorId) => {
  const recommendedSchemes = mockSchemeLibrary.filter(scheme => 
    scheme.indicatorIds && scheme.indicatorIds.includes(parseInt(indicatorId))
  );
  
  const sortedSchemes = recommendedSchemes.sort((a, b) => a.id - b.id);
  
  return sortedSchemes.map(scheme => ({
    value: scheme.id,
    label: `方案${scheme.id}：${scheme.name}`,
    preview: {
      type: scheme.type,
      description: scheme.description,
      problemSolved: scheme.problemSolved,
      economicBenefit: scheme.economicBenefit,
      environmentalBenefit: scheme.environmentalBenefit
    }
  }));
}

// Mock API实现
export const mockDetailApi = {
  // 筹划与组织相关
  getAuditTeam: (enterpriseId) => {
    return Promise.resolve({ data: mockPlanningData.auditTeam })
  },
  
  getWorkPlans: (enterpriseId) => {
    return Promise.resolve({ data: mockPlanningData.workPlans })
  },
  
  getTrainingRecords: (enterpriseId) => {
    return Promise.resolve({ data: mockPlanningData.trainingRecords })
  },
  
  // 预审核相关
  getPreAuditData: (enterpriseId) => {
    return Promise.resolve({ data: mockPreAuditData })
  },
  
  submitPreAuditData: (enterpriseId, data) => {
    return Promise.resolve({ message: '提交成功' })
  },
  
  // 审核相关
  getAuditResults: (enterpriseId) => {
    return Promise.resolve({ data: mockIndicators })
  },
  
  submitAuditResults: (enterpriseId, data) => {
    return Promise.resolve({ message: '提交成功' })
  },
  
  getRecommendedSchemes: (enterpriseId, indicatorId) => {
    const schemes = getRecommendedSchemes(indicatorId);
    return Promise.resolve({ data: schemes });
  },
  
  // 方案库相关
  getSchemes: (enterpriseId, params = {}) => {
    const { page = 1, page_size = 200, name = '', indicatorIds = [] } = params
    let filteredSchemes = mockSchemeLibrary
    
    if (name) {
      filteredSchemes = filteredSchemes.filter(scheme => 
        scheme.name.includes(name)
      )
    }
    
    if (indicatorIds && indicatorIds.length > 0) {
      filteredSchemes = filteredSchemes.filter(scheme => {
        if (!scheme.indicatorIds || scheme.indicatorIds.length === 0) return false
        return indicatorIds.some(id => 
          scheme.indicatorIds.includes(parseInt(id))
        )
      })
    }
    
    filteredSchemes.sort((a, b) => a.id - b.id);
    
    const total = filteredSchemes.length
    const start = (page - 1) * page_size
    const end = start + page_size
    const list = filteredSchemes.slice(start, end)
    
    return Promise.resolve({
      data: {
        list,
        total,
        page,
        page_size
      }
    })
  },
  
  createScheme: (enterpriseId, data) => {
    return Promise.resolve({ message: '创建成功' })
  },
  
  updateScheme: (enterpriseId, schemeId, data) => {
    return Promise.resolve({ message: '更新成功' })
  },
  
  deleteScheme: (enterpriseId, schemeId) => {
    return Promise.resolve({ message: '删除成功' })
  },
  
  // 报告相关
  generateReport: (enterpriseId, data) => {
    return Promise.resolve({ message: '报告生成成功' })
  }
}
```

## 9. 开发规范

### 9.1 代码规范

**严格遵循PCB模块的代码规范**：

- 使用 Vue 3 Composition API
- 组件命名采用 PascalCase
- 文件名采用 kebab-case
- 遵循 ESLint 和 Prettier 规范
- 统一的注释规范

### 9.2 组件开发规范

```vue
<template>
  <!-- 模板内容 -->
</template>

<script setup>
// 1. 导入依赖
import { ref, computed, watch, onMounted } from 'vue'
import { useRouter, useRoute } from 'vue-router'

// 2. 定义 Props
const props = defineProps({
  // props 定义
})

// 3. 定义 Emits
const emit = defineEmits(['event1', 'event2'])

// 4. 响应式数据
const data = ref('')

// 5. 计算属性
const computedValue = computed(() => {
  // 计算逻辑
})

// 6. 方法定义
const handleClick = () => {
  // 处理逻辑
}

// 7. 生命周期
onMounted(() => {
  // 初始化逻辑
})
</script>

<style scoped>
/* 组件样式 */
</style>
```

### 9.3 API 调用规范

```javascript
// 使用 async/await 处理异步操作
const fetchData = async () => {
  try {
    loading.value = true
    const response = await steelApi.getEnterpriseList(params.value)
    data.value = response.data
  } catch (error) {
    console.error('获取数据失败:', error)
    window.$message.error('获取数据失败')
  } finally {
    loading.value = false
  }
}
```

### 9.4 错误处理规范

- 所有 API 调用都要进行错误处理
- 使用 `window.$message` 显示用户友好的错误信息
- 记录详细的错误日志用于调试
- 提供重试机制

### 9.5 性能优化规范

- 使用 `v-memo` 优化列表渲染
- 合理使用 `computed` 和 `watch`
- 避免在模板中使用复杂计算
- 使用懒加载加载组件
- 方案库使用表格内滚动而非分页

## 10. 实施计划

### 10.1 开发阶段划分

| 阶段 | 工作内容 | 预计时间 | 说明 |
|------|----------|----------|------|
| 第一阶段 | 基础框架搭建 | 1天 | 复制PCB模块结构，调整为steel目录 |
| 第二阶段 | Mock数据准备 | 2天 | 编写钢铁行业的指标和方案库Mock数据 |
| 第三阶段 | 企业列表页开发 | 1天 | 复用PCB模块组件，替换数据源 |
| 第四阶段 | 企业信息模块 | 1天 | 调整表单字段为钢铁行业特定字段 |
| 第五阶段 | 筹划与组织模块 | 0.5天 | 完全复用PCB模块 |
| 第六阶段 | 预审核模块 | 3天 | 开发钢铁行业特定的7个子表单组件 |
| 第七阶段 | 审核模块 | 2天 | 替换指标数据，复用审核表格逻辑 |
| 第八阶段 | 方案库模块 | 1天 | 复用PCB方案库，替换数据源 |
| 第九阶段 | 报告模块 | 1天 | 完全复用PCB模块 |
| 第十阶段 | 测试与优化 | 2天 | 全面测试，修复bug，性能优化 |

**总计：约15个工作日**

### 10.2 关键里程碑

1. **D3**：基础框架和Mock数据完成
2. **D6**：企业列表和基本信息模块完成
3. **D10**：预审核和审核模块完成
4. **D12**：方案库和报告模块完成
5. **D15**：完成测试和交付

### 10.3 风险控制

| 风险项 | 影响 | 应对措施 |
|--------|------|----------|
| 钢铁行业指标体系不明确 | 高 | 提前与业务方确认指标定义和评分标准 |
| 方案库内容不足 | 中 | 分批次添加方案，先实现核心功能 |
| 组件复用度不高 | 低 | 严格按照PCB模块的组件设计进行开发 |

### 10.4 质量保证

- **代码审查**：每个模块完成后进行代码审查
- **单元测试**：关键业务逻辑编写单元测试
- **集成测试**：模块间交互测试
- **用户验收测试**：邀请业务方进行验收测试

## 11. 附录

### 11.1 与PCB模块的对照表

| 模块 | PCB模块 | 钢铁模块 | 差异说明 |
|------|---------|----------|----------|
| 企业列表 | 64家PCB企业 | 钢铁企业 | 仅企业类型不同 |
| 企业信息 | PCB制造字段 | 钢铁制造字段 | 调整部分字段名称和单位 |
| 筹划与组织 | 完全一致 | 完全一致 | 无差异 |
| 预审核 | 7个子表单 | 7个子表单 | 表单字段内容不同 |
| 审核 | 64项指标 | 50-60项指标 | 指标数量和内容不同 |
| 方案库 | 130项方案 | 100-120项方案 | 方案数量和内容不同 |
| 报告 | 完全一致 | 完全一致 | 无差异 |

### 11.2 技术支持

- **参考文档**：PCB模块代码、PCB具体内容技术方案.md
- **UI组件库**：Naive UI官方文档
- **Vue 3文档**：Vue.js官方文档
- **图标库**：Carbon Icons、Material Design Icons

---

## 总结

本技术方案严格基于PCB模块的成熟设计和实现，通过复用组件、统一架构、替换数据的方式，快速高效地实现钢铁行业清洁生产云审核模块。主要特点：

1. **前后端解耦**：所有数据交互通过API接口，已为后端预留标准化接口
2. **组件复用率高**：约70%的组件直接复用PCB模块
3. **开发效率高**：预计15个工作日完成开发
4. **技术一致性**：与PCB模块保持相同的技术栈和代码规范
5. **易于维护**：模块化设计，清晰的代码结构

本技术方案为钢铁行业审核模块的开发提供了完整的技术指导，确保开发过程规范、高效，最终交付高质量的产品。

